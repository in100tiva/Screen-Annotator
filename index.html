<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screen Annotator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Canvas principal para desenho -->
    <canvas id="drawingCanvas"></canvas>

    <!-- Overlay do spotlight -->
    <div id="spotlightOverlay" class="hidden">
        <div id="spotlightHole"></div>
    </div>

    <!-- Toolbar flutuante -->
    <div id="toolbar" class="toolbar">
        <!-- Arrastar toolbar -->
        <div class="toolbar-drag" id="toolbarDrag">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <circle cx="8" cy="6" r="2"/>
                <circle cx="16" cy="6" r="2"/>
                <circle cx="8" cy="12" r="2"/>
                <circle cx="16" cy="12" r="2"/>
                <circle cx="8" cy="18" r="2"/>
                <circle cx="16" cy="18" r="2"/>
            </svg>
        </div>

        <!-- Ferramentas de desenho -->
        <div class="tool-section">
            <button class="tool-btn active" data-tool="pen" title="Caneta (Ctrl+1)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                    <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                    <path d="M2 2l7.586 7.586"/>
                    <circle cx="11" cy="11" r="2"/>
                </svg>
            </button>
            <button class="tool-btn" data-tool="highlighter" title="Marcador (Ctrl+2)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 11l-6 6v3h9l3-3"/>
                    <path d="M22 12l-4.6 4.6a2 2 0 01-2.8 0l-5.2-5.2a2 2 0 010-2.8L14 4"/>
                </svg>
            </button>
            <button class="tool-btn" data-tool="rectangle" title="Retângulo (Ctrl+3)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                </svg>
            </button>
            <button class="tool-btn" data-tool="circle" title="Círculo (Ctrl+4)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="9"/>
                </svg>
            </button>
            <button class="tool-btn" data-tool="arrow" title="Seta (Ctrl+5)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="5" y1="19" x2="19" y2="5"/>
                    <polyline points="10,5 19,5 19,14"/>
                </svg>
            </button>
            <button class="tool-btn" data-tool="line" title="Linha (Ctrl+6)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="4" y1="20" x2="20" y2="4"/>
                </svg>
            </button>
            <button class="tool-btn" data-tool="text" title="Texto (T)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="4,7 4,4 20,4 20,7"/>
                    <line x1="12" y1="4" x2="12" y2="20"/>
                    <line x1="8" y1="20" x2="16" y2="20"/>
                </svg>
            </button>
            <button class="tool-btn" data-tool="eraser" title="Borracha (Ctrl+E)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 20H7L3 16c-.8-.8-.8-2 0-2.8l10-10c.8-.8 2-.8 2.8 0l6 6c.8.8.8 2 0 2.8L13 20"/>
                    <path d="M18 9l-3-3"/>
                </svg>
            </button>
        </div>

        <div class="separator"></div>

        <!-- Cores -->
        <div class="tool-section colors">
            <button class="color-btn active" data-color="#FF0000" style="background-color: #FF0000" title="Vermelho"></button>
            <button class="color-btn" data-color="#00FF00" style="background-color: #00FF00" title="Verde"></button>
            <button class="color-btn" data-color="#0000FF" style="background-color: #0000FF" title="Azul"></button>
            <button class="color-btn" data-color="#FFFF00" style="background-color: #FFFF00" title="Amarelo"></button>
            <button class="color-btn" data-color="#FF00FF" style="background-color: #FF00FF" title="Magenta"></button>
            <button class="color-btn" data-color="#00FFFF" style="background-color: #00FFFF" title="Ciano"></button>
            <button class="color-btn" data-color="#FFFFFF" style="background-color: #FFFFFF" title="Branco"></button>
            <button class="color-btn" data-color="#000000" style="background-color: #000000" title="Preto"></button>
            <input type="color" id="customColor" value="#FF0000" title="Cor personalizada">
        </div>

        <div class="separator"></div>

        <!-- Espessura -->
        <div class="tool-section">
            <label class="size-label">Espessura:</label>
            <input type="range" id="strokeSize" min="1" max="50" value="3" class="stroke-slider">
            <span id="strokeSizeValue" class="size-value">3</span>
        </div>

        <div class="separator"></div>

        <!-- Ações -->
        <div class="tool-section actions">
            <button class="action-btn" id="undoBtn" title="Desfazer (Ctrl+Z)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 7v6h6"/>
                    <path d="M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"/>
                </svg>
            </button>
            <button class="action-btn" id="redoBtn" title="Refazer (Ctrl+Y)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 7v6h-6"/>
                    <path d="M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7"/>
                </svg>
            </button>
            <button class="action-btn" id="clearBtn" title="Limpar tudo (Ctrl+Shift+C)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3,6 5,6 21,6"/>
                    <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                </svg>
            </button>
            <button class="action-btn" id="spotlightBtn" title="Spotlight (Ctrl+Shift+S)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                </svg>
            </button>
        </div>

        <div class="separator"></div>

        <!-- Controles da janela -->
        <div class="tool-section window-controls">
            <button class="action-btn" id="toggleDrawingBtn" title="Toggle Modo Desenho (Ctrl+Shift+D)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                </svg>
            </button>
            <button class="action-btn" id="settingsBtn" title="Configurar Atalhos">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
                </svg>
            </button>
            <button class="action-btn" id="minimizeBtn" title="Minimizar para bandeja (Ctrl+Shift+A)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Modal de Configuracoes de Atalhos -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configurar Atalhos</h2>
                <button class="modal-close" id="closeSettingsBtn">&times;</button>
            </div>
            <div class="modal-body">
                <p class="settings-hint">Clique em um campo e pressione a combinacao de teclas desejada (ou botao do mouse)</p>

                <div class="shortcut-section">
                    <h3>Ferramentas</h3>
                    <div class="shortcut-list">
                        <div class="shortcut-item">
                            <label>Caneta</label>
                            <button class="shortcut-input" data-action="tool-pen">Ctrl+1</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Marcador</label>
                            <button class="shortcut-input" data-action="tool-highlighter">Ctrl+2</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Retangulo</label>
                            <button class="shortcut-input" data-action="tool-rectangle">Ctrl+3</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Circulo</label>
                            <button class="shortcut-input" data-action="tool-circle">Ctrl+4</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Seta</label>
                            <button class="shortcut-input" data-action="tool-arrow">Ctrl+5</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Linha</label>
                            <button class="shortcut-input" data-action="tool-line">Ctrl+6</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Texto</label>
                            <button class="shortcut-input" data-action="tool-text">T</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Borracha</label>
                            <button class="shortcut-input" data-action="tool-eraser">Ctrl+E</button>
                        </div>
                    </div>
                </div>

                <div class="shortcut-section">
                    <h3>Cores</h3>
                    <div class="shortcut-list">
                        <div class="shortcut-item">
                            <label><span class="color-dot" style="background:#FF0000"></span>Vermelho</label>
                            <button class="shortcut-input" data-action="color-red">-</button>
                        </div>
                        <div class="shortcut-item">
                            <label><span class="color-dot" style="background:#00FF00"></span>Verde</label>
                            <button class="shortcut-input" data-action="color-green">-</button>
                        </div>
                        <div class="shortcut-item">
                            <label><span class="color-dot" style="background:#0000FF"></span>Azul</label>
                            <button class="shortcut-input" data-action="color-blue">-</button>
                        </div>
                        <div class="shortcut-item">
                            <label><span class="color-dot" style="background:#FFFF00"></span>Amarelo</label>
                            <button class="shortcut-input" data-action="color-yellow">-</button>
                        </div>
                        <div class="shortcut-item">
                            <label><span class="color-dot" style="background:#FF00FF"></span>Magenta</label>
                            <button class="shortcut-input" data-action="color-magenta">-</button>
                        </div>
                        <div class="shortcut-item">
                            <label><span class="color-dot" style="background:#00FFFF"></span>Ciano</label>
                            <button class="shortcut-input" data-action="color-cyan">-</button>
                        </div>
                        <div class="shortcut-item">
                            <label><span class="color-dot" style="background:#FFFFFF;border:1px solid #666"></span>Branco</label>
                            <button class="shortcut-input" data-action="color-white">-</button>
                        </div>
                        <div class="shortcut-item">
                            <label><span class="color-dot" style="background:#000000"></span>Preto</label>
                            <button class="shortcut-input" data-action="color-black">-</button>
                        </div>
                    </div>
                </div>

                <div class="shortcut-section">
                    <h3>Acoes</h3>
                    <div class="shortcut-list">
                        <div class="shortcut-item">
                            <label>Desfazer</label>
                            <button class="shortcut-input" data-action="undo">Ctrl+Z</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Refazer</label>
                            <button class="shortcut-input" data-action="redo">Ctrl+Y</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Limpar Tela</label>
                            <button class="shortcut-input" data-action="clear">Ctrl+Shift+C</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Spotlight</label>
                            <button class="shortcut-input" data-action="spotlight">Ctrl+Shift+S</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Modo Desenho</label>
                            <button class="shortcut-input" data-action="toggle-drawing">Ctrl+Shift+D</button>
                        </div>
                        <div class="shortcut-item">
                            <label>Mostrar/Ocultar</label>
                            <button class="shortcut-input" data-action="toggle-visibility">Ctrl+Shift+A</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="resetShortcutsBtn">Restaurar Padrao</button>
                <button class="btn btn-primary" id="saveShortcutsBtn">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Indicador de modo -->
    <div id="modeIndicator" class="mode-indicator">
        <span id="modeText">Modo: Desenho</span>
    </div>

    <!-- Input de texto oculto para ferramenta de texto -->
    <input type="text" id="textInput" class="text-input hidden" placeholder="Digite o texto...">

    <script src="renderer.js"></script>
</body>
</html>
